<style>
    input:focus,textarea:focus{
        box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(82, 168, 236, 0.6) !important;
        border-color: rgba(82, 168, 236, 0.8) !important;
    }
    input,textarea{
        border-radius:4px !important;
    }
    label{
        margin-bottom:0px !important;
    }
</style>
<div class="card" style="padding-top:5px" ng-show="hasPermission('obras.lectura')">
    <div style="margin:10px">
        <div class="card-actions pull-right">
            <a class="btn btn-link no-print" ng-if="editando" ng-click="eliminarObra()"><i class="icon-trash"></i></a>
            <a class="btn btn-link no-print" ng-if="editando" ng-click="guardar()"><i class="icon-ok"></i></a>
            <a class="btn btn-link no-print" ng-if="editando" ng-click="cancelar()"><i class="icon-remove"></i></a>
            <a class="btn btn-link no-print" ng-if="!editando" href="/obras"><i class="icon-undo"></i></a>
            <a ng-show="hasPermission('obras.escritura')" class="btn btn-link no-print" ng-if="!editando" ng-click="modificar()"><i class="icon-edit"></i></a>
        </div>
        <div align="center" class="progress active pull-right span3" style="height:30px; width:30px;margin:0px;padding:0px; vertical-align:middle;border-radius:100%" ng-class="{'progress-info':valorPorcentaje>=85,'progress-danger':valorPorcentaje<=25,'progress-warning':valorPorcentaje>25 && valorPorcentaje<=50, 'progress-success':valorPorcentaje>50 && valorPorcentaje<85}">
            <div class="bar" ng-style="{width: barraProgreso() + '%'}">
               <div class="sr-only" style="margin-top:5px" ng-show="barraProgreso()>50">{{valorPorcentaje}}%</div>
            </div>
            <div class="sr-only" style="margin-top:5px" ng-show="barraProgreso()<=50; ">{{valorPorcentaje}}%</div>
        </div>
        <h3 class="card-heading simple" style="padding-left:0px;font-size:14px;padding-right:0px;height:45px;margin-bottom:10px;">
            <ul id="myTab" class="nav nav-pills">
                <li ng-class="{'active': tab == 'identificacion'}"><a href="#" ng-click="tab='identificacion'" data-toggle="tab">Identificación</a></li>
                <li ng-class="{'active': tab == 'ubicacion'}"><a href="#" ng-click="tab='ubicacion';mostra='punto'" data-toggle="tab">Ubicación</a></li>
                <li ng-class="{'active': tab == 'clasificacion'}"><a href="#" ng-click="tab='clasificacion'" data-toggle="tab">Clasificación</a></li>
                <li ng-class="{'active': tab == 'alcance'}"><a href="#" ng-click="tab='alcance'" data-toggle="tab">Alcance</a></li>
                <li ng-class="{'active': tab == 'proyecto'}"><a href="#" ng-click="tab='proyecto'" data-toggle="tab">Proyecto</a></li>
                <li ng-class="{'active': tab == 'contrato'}"><a href="#" ng-click="tab='contrato'" data-toggle="tab">Contrato</a></li>
                <li ng-class="{'active': tab == 'inicio'}"><a href="#" ng-click="tab='inicio'" data-toggle="tab">Inicio</a></li>
                <li ng-class="{'active': tab == 'avance'}"><a href="#" ng-click="tab='avance'" data-toggle="tab">Avance</a></li>
                <li ng-class="{'active': tab == 'final'}"><a href="#" ng-click="tab='final'" data-toggle="tab">Final</a></li>
                <li ng-class="{'active': tab == 'comunicacion'}"><a href="#" ng-click="tab='comunicacion'" data-toggle="tab">Comunicación</a></li>
                <li ng-class="{'active': tab == 'estado'}"><a href="#" ng-click="tab='estado'" data-toggle="tab">Estado</a></li>
            </ul>
        </h3>
        
        <div ng-if="tab == 'identificacion'">
            <div class="row-fluid">
                <div class="span4">
                    <label>Nombre Corto:</label>
                    <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Denominación Corta" ng-model="obra.nombre"/>
                </div>
                <div class="span8" style="margin-left:5px">
                    <label>Nombre Largo:</label>
                    <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Denominación Larga de la obra" ng-model="obra.nombre_largo"/>
                </div>
            </div>
            <hr style="margin-top:5px;margin-bottom:5px">
            <div class="row-fluid">
                <div class="span2">
                    <label>Id Patente:</label>
                    <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Numero de identificación" ng-model="obra.patente"/>
                </div>
                <div class="span2" style="margin-left:5px">
                    <label>Etapa:</label>
                    <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Numero de Etapa" ng-model="obra.etapa"/>
                </div>
                <div class="span2" style="margin-left:5px">
                    <label>Siglas:</label>
                    <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Siglas de obra" ng-model="obra.siglas"/>
                </div>
                <div class="span4" style="margin-left:5px">
                    <label>Referencia de Mapa:</label>
                    <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Referencia de Mapa" ng-model="obra.ref_mapa"/>
                </div>
                <div class="span2" style="margin-left:5px">
                    <label>Plan:</label>
                    <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Plan" ng-model="obra.plan"/>
                </div>
            </div>
            <h4 style="margin-bottom:0px">Vinculos</h4>
            <hr style="margin-top:5px;margin-bottom:5px"/>
            <div class="row-fluid">
                <div class="span4">
                    <label>Legislativo:</label>
                    <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Identificación de la Pieza Legislativa a la cual esta vinculada" ng-model="obra.legislativo" />
                </div>
                <div class="span4" style="margin-left:5px">
                    <label>Expedientes:</label>
                    <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Identificación del Expediente a la cual esta vinculada" ng-model="obra.expediente" />
                </div>
                <div class="span4" style="margin-left:5px">
                    <label>Codigo Anterior:</label>
                    <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Identificación del Código Anterior de la obra" ng-model="obra.codigo_anterior"/>
                </div>
            </div>
            <div class="row-fluid" style="margin-bottom:5px">
                <div class="span4">
                    <label>Temas:</label>
                    <select ui-select2 class="input-block-level" style="width:100%" type="text" ng-model="dataTema" ng-disabled="!editando" ng-options="i._id as i.nombre for i in temas | filter: mostrarTema">
                        <option ng-disabled="true" value=""></option>
                    </select>
                </div>
                <button class="btn" style="margin-left:5px;margin-top:20px" ng-disabled="!editando" ng-click="agregarTema(dataTema)"><i class="icon-plus"></i></button>
            </div>
            <div class="row-fluid">
                <div class="control-group" style="margin-bottom:0px" ng-repeat="t in obra.temas">
                    <input type="text" style="margin-bottom:5px" ng-disabled="true" value="{{temaPorId(t).nombre}}"/>
                    <button href="#" class="btn btn-danger" style="margin-left:5px;margin-bottom:5px" ng-show="editando" ng-click="eliminarListaElem(t, obra.temas)"><i class="icon-trash"></i></button>
                </div>
            </div>
        </div>
        
        <div ng-hide="tab == 'identificacion'">
            <div class="row-fluid">
                <div class="span4">
                    <label>Nombre Corto:</label>
                    <input type="text" class="input-block-level" ng-disabled="true" placeholder="Denominación Corta" ng-model="obra.nombre"/>
                </div>
                <div class="span8" style="margin-left:5px">
                    <label>Nombre Largo:</label>
                    <input type="text" class="input-block-level" ng-disabled="true" placeholder="Denominación Larga de la obra" ng-model="obra.nombre_largo"/>
                </div>
            </div>
            <hr style="margin-top:5px;margin-bottom:0px"/>
        </div>
        
        <div ng-show="tab == 'ubicacion'">
            <ul id="myTab" style="margin-bottom:5px" class="nav nav-pills">
                <li ng-class="{'active': mostra == 'punto'}"><a href="#" ng-click="mostra='punto'" data-toggle="tab">Punto</a></li>
                <li ng-class="{'active': mostra == 'mapa'}"><a href="#" ng-click="mostra='mapa'" data-toggle="tab">Mapa</a></li>
            </ul>
            <div ng-show="mostra == 'punto'" class="container-fluid">
                <div class="span12" style="margin-left:0px">
                    <div class="span6" style="margin-left:0px">
                        <div class="row-fluid">
                            <!--<div class="span4">-->
                            <!--    <label>Calle:</label>-->
                            <!--    <input type="text" class="input-block-level" ng-disabled="!editando" data-provide="typeahead" placeholder="Nombre de Calle" ng-model="obra.calle" id="calle3-typeahead" data-source={{calles}} />-->
                            <!--</div>-->
                            <div class="span4">
                                <label>Calle:</label>
                                <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Nombre de Calle" ng-model="obra.calle" id="callejero1" />
                            </div>
                            <div class="span2" style="margin-left:5px">
                                <label>Altura:</label>
                                <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Nro" ng-model="obra.altura"/>
                            </div>
                            <!--<div class="span4" style="margin-left:5px">-->
                            <!--    <label>Cruce:</label>-->
                            <!--    <input type="text" class="input-block-level" ng-disabled="!editando" data-provide="typeahead" placeholder="Nombre de calle" ng-model="obra.cruce" id="cruce3-typeahead" data-source={{calles}} />-->
                            <!--</div>-->
                            <div class="span4" style="margin-left:5px">
                                <label>Cruce:</label>
                                <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Nombre de calle" ng-model="obra.cruce" id="callejero2" />
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span2">
                                <label>Seccion:</label>
                                <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Nro" ng-model="obra.seccion"/>
                            </div>
                            <div class="span2" style="margin-left:5px">
                                <label>Manzana:<br>
                                <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Nro" ng-model="obra.manzana"/>
                            </div>
                            <div class="span2" style="margin-left:5px">
                                <label>Parcela:</label>
                                <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Nro" ng-model="obra.parcela"/>
                            </div>
                            <div class="span2" style="margin-left:5px">
                                <label>U.F.:</label>
                                <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Nro" ng-model="obra.unidad_funcional"/>
                            </div>
                            <div class="span3" style="margin-left:5px">
                                <label>Barrio:</label>
                                <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Barrio" ng-model="obra.barrio"/>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span4">
                                <select ng-disabled="!editando" class="input-block-level" style="position:5px" placeholder="Comuna" ui-select2 type="text" ng-model="dataComuna.comuna">
                                    <option style="display:none" value=""></option>
                                    <option ng-repeat="e in comunas | orderBy: 'numero' | filter:filtroComuna track by e._id" value="{{e._id}}">{{e.nombre}}</span></option>
                                </select>
                            </div>
                            <button class="btn" style="margin-bottom:10px; margin-left: 5px" ng-disabled="!editando" ng-click="agregarComuna(dataComuna)"><i class="icon-plus"></i></button>
                            <div ng-repeat="c in obra.comuna">
                                <div style="display:inline-block;margin-right:10px">
                                    <input class="input-block-level" style="margin-bottom:5px" type="text" ng-model="comunaPorId(c).nombre" ng-disabled="true"/>
                                </div>
                                <button href="#"class="btn btn-danger" style="margin-bottom:5px;margin-right:10px" ng-show="editando" ng-click="eliminarListaElem(c, obra.comuna)"><i class="icon-trash"></i></button>
                            </div>
                        </div>
                    </div>
                    <div class="span6" style="margin-left:0px">
                        <div class="span4" style="margin-left: 0px;" ng-if="(obra.calle && obra.altura)">
                            <img class="input-block-level" src="http://servicios.usig.buenosaires.gov.ar/LocDir/mapa.phtml?dir={{obra.calle}} {{obra.altura}}&desc=&punto=1&w=370&h=200" onError="this.style.display = 'none'" onload="this.style.display = ''"/>
                        </div>
                        <div class="span4" style="margin-left: 0px;" ng-if="!(obra.calle && obra.altura)">
                            <img class="input-block-level" src="http://servicios.usig.buenosaires.gov.ar/LocDir/mapa.phtml?dir={{obra.calle}} y {{obra.cruce}}&desc=&punto=1&w=370&h=200" onError="this.style.display = 'none'" onload="this.style.display = ''"/>
                        </div>
                    </div>
                </div>
                <div class="span12" style="margin-left:0px">
                    <div class="row-fluid">
                        <div class="span3">
                            <label>Provincia:</label>
                            <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Nombre de Provincia" ng-model="obra.provincia"/>
                        </div>
                        <div class="span2" style="margin-left:5px">
                            <label>Pais:</label>
                            <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Pais" ng-model="obra.pais"/>
                        </div>
                        <div class="span2" style="margin-left:5px">
                            <label>Codigo Postal:</label>
                            <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Numero de CP" ng-model="obra.codigo_postal"/>
                        </div>
                        <div class="span3" style="margin-left:5px">
                            <label>Grilla de Coordenadas:</label>
                            <input type="text" class="input-block-level" ng-disabled="true" placeholder="Coordenadas" ng-model="obra.coordenadas"/>
                        </div>
                        <div class="span3" style="margin-left:5px">
                            <label>Partida Matriz:</label>
                            <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Partida Matriz de la obra" ng-model="obra.partida_matriz"/>
                        </div>
                        <div class="span3" style="margin-left:0px">
                            <label>UTIU:</label>
                            <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="UTIU" ng-model="obra.utiu"/>
                        </div>
                        <div class="span2" style="margin-left:5px">
                            <label>Region Sanitaria:</label>
                            <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Region Sanitaria" ng-model="obra.region_sanitaria"/>
                        </div>
                        <div class="span2" style="margin-left:5px">
                            <label>Distrito Escolar:</label>
                            <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Distrito Escolar" ng-model="obra.distrito_escolar"/>
                        </div>
                        <div class="span3" style="margin-left:5px">
                            <label>Comisaria Policia Metropolitana:</label>
                            <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Comisaria Policia Metropolitana" ng-model="obra.comisaria_pm"/>
                        </div>
                    </div>
                </div>
            </div>
            <div ng-show="mostra == 'mapa'">
                <div class="row-fluid">
                    <div class="span2">
                        <label>Calle:</label>
                        <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Desde que calle" data-provide="typeahead" ng-model="dataDire.calle" id="calle-typeahead" data-source={{calles}} />
                    </div>
                    <div class="span2" style="margin-left:5px">
                        <label>Cruce:</label>
                        <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Calle Delimitadora" data-provide="typeahead" ng-model="dataDire.cruce" id="cruce-typeahead" data-source={{calles}} />
                    </div>
                    <div class="span1" style="margin-left:5px">
                        <label>Altura:</label>
                        <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Nro" ng-model="dataDire.altura"/>
                    </div>
                    <div class="span2" style="margin-left:5px">
                        <label>Calle:</label>
                        <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Hasta que calle" data-provide="typeahead" ng-model="dataDire.calle2" id="calle2-typeahead" data-source={{calles}} />
                    </div>
                    <div class="span2" style="margin-left:5px">
                        <label>Cruce:</label>
                        <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Calle Delimitadora" data-provide="typeahead" ng-model="dataDire.cruce2" id="cruce2-typeahead" data-source={{calles}} />
                    </div>
                    <div class="span1" style="margin-left:5px">
                        <label>Altura:</label>
                        <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Nro" ng-model="dataDire.altura2"/>
                    </div>
                    <button class="btn" style="margin-top:20px;margin-left:5px" data-placement="bottom" ng-disabled="!editando" ng-click="agregarDireMapa()"><i class="icon-plus"></i></button>
                </div>
                <hr style="margin-top:2px; margin-bottom:2px"/>
                <div ng-repeat="o in obra.direccionesMapa" style="clear:both; min-height: 40px; margin-top: 10px; margin-bottom: 10px">
                    <form class="form-inline">
                        <label>Desde:
                            <input type="text" ng-model="o.calle" ng-disabled="true"/>
                        </label>
                        <label>Y:
                            <input type="text" ng-model="o.cruce" ng-disabled="true"/>
                        </label>
                        <label>Nro:
                            <input type="text" class="span1" ng-model="o.altura" ng-disabled="true"/>
                        </label>
                        <label>Hasta:
                            <input type="text" ng-model="o.calle2" style="margin-left: 3px;" ng-disabled="true"/>
                        </label>
                        <label>Y:
                            <input type="text" ng-model="o.cruce2" ng-disabled="true"/>
                        </label>
                        <label>Nro:
                            <input type="text" class="span1" ng-model="o.altura2" ng-disabled="true"/>
                        </label>
                        <button class="btn btn-danger" data-placement="bottom" ng-click="eliminarElemento(obra.direccionesMapa,o)" style="margin-left: 0px;padding-left: 0px;padding-right: 0px" ng-if="editando"><i class="icon-trash icon-white"></i></button>
                    </form>
                </div>
            </div>
        </div>
        
        <div ng-if="tab == 'clasificacion'" class="container-fluid" style="padding-left:0px">
            <div class="span12" style="margin-left:0px">
                <!--<div class="control-group span3" style="margin-left: 0px; margin-right: 5px">-->
                <!--    <label style="margin-bottom: 0px">Tipo de Obra:</label>-->
                <!--    <select class="input-block-level" ng-disabled="!editando" placeholder="Tipo" ui-select2 type="text" ng-model="obra.tipoObra">-->
                <!--        <option value=""></option>-->
                <!--        <option value=""></option>-->
                <!--        <option ng-repeat="e in tiposObra" value="{{e._id}}">{{e.nombre}}</option>-->
                <!--    </select>-->
                <!--</div>-->
                <!--<div class="control-group span3" style="margin-left: 0px; margin-right: 5px">-->
                <!--    <label style="margin-bottom: 0px">Grupo:</label>-->
                <!--    <select class="input-block-level" ng-disabled="!editando" placeholder="Grupo" ui-select2 type="text" ng-model="obra.grupo">-->
                <!--        <option value=""></option>-->
                <!--        <option value=""></option>-->
                <!--        <option ng-repeat="e in grupos | orderBy: 'orden'" value="{{e._id}}">{{e.nombre}}</option>-->
                <!--    </select>-->
                <!--</div>-->
                <div class="control-group span3" style="margin-left: 0px; margin-right: 5px">
                    <label style="margin-bottom: 0px">Tipo:</label>
                    <select class="input-block-level" ng-disabled="!editando" placeholder="Tipo" ui-select2 type="text" ng-model="obra.tipo">
                        <option value=""></option>
                        <option value=""></option>
                        <option ng-repeat="e in tipos | orderBy: 'nombre'" value="{{e._id}}">{{e.nombre}}</option>
                    </select>
                </div>
                <div class="control-group span3" style="margin-left: 0px; margin-right: 5px">
                    <label style="margin-bottom: 0px">Subtipo:</label>
                    <select class="input-block-level" ng-disabled="!editando" placeholder="Subtipo" ui-select2 type="text" ng-model="obra.subtipo">
                        <option value=""></option>
                        <option value=""></option>
                        <option ng-repeat="e in subtipos | orderBy: 'nombre'" value="{{e._id}}">{{e.nombre}}</option>
                        <option value="{{subtiposOtro._id}}">{{subtiposOtro.nombre}}</option>
                    </select>
                </div>
                <div class="control-group span3" style="margin-left: 0px; margin-right: 5px">
                    <label style="margin-bottom: 0px">Impacto:</label>
                    <select class="input-block-level" ng-disabled="!editando" placeholder="Impacto" ui-select2 type="text" ng-model="obra.impacto">
                        <option value=""></option>
                        <option value=""></option>
                        <option ng-repeat="e in impactos | orderBy: 'nombre'" value="{{e._id}}">{{e.nombre}}</option>
                    </select>
                </div>
                <div class="control-group span3" style="margin-left: 0px; margin-right: 5px">
                    <label>Segmento:</label>
                    <select class="input-block-level" ng-disabled="!editando" placeholder="Segmento" ui-select2 type="text" ng-model="obra.orden1">
                        <option value=""></option>
                        <option value=""></option>
                        <option ng-repeat="e in ordenes | orderBy: 'orden'" value="{{e._id}}">{{e.nombre}}</option>
                    </select>
                </div>
                <div class="span2" style="margin-left:0px">
                    <label>Presentación:</label>
                    <input class="span2" type="text" ng-disabled="!editando" placeholder="Segundo orden" ng-model="obra.orden2"/>
                </div>
            </div>
            <!--<div class="span12" style="margin-left:0px">-->
            <!--    <div class="control-group span3" style="margin-left: 0px; margin-right: 5px">-->
            <!--        <label>Segmento:</label>-->
            <!--        <select class="input-block-level" ng-disabled="!editando" placeholder="Segmento" ui-select2 type="text" ng-model="obra.orden1">-->
            <!--            <option value=""></option>-->
            <!--            <option value=""></option>-->
            <!--            <option ng-repeat="e in ordenes | orderBy: 'orden'" value="{{e._id}}">{{e.nombre}}</option>-->
            <!--        </select>-->
            <!--    </div>-->
            <!--    <div class="span2" style="margin-left:0px">-->
            <!--        <label>Presentación:</label>-->
            <!--        <input class="span2" type="text" ng-disabled="!editando" placeholder="Segundo orden" ng-model="obra.orden2"/>-->
            <!--    </div>-->
            <!--</div>-->
        </div>
        
        <div ng-if="tab == 'alcance'" class="container-fluid">
            <div class="row-fluid">
                <div class="span4">
                    <label>Jurisdicción:</label>
                    <select class="input-block-level" style="width:100%" ng-disabled="!editando" placeholder="Jurisdiccion" ui-select2 type="text" ng-model="obra.jurisdiccion">
                        <option value=""></option>
                        <option value=""></option>
                        <option ng-repeat="e in organigrama | orderBy: 'nombreCompleto'" value="{{e._id}}">{{e.nombreCompleto}}</option>
                    </select>
                </div>
                <div class="span2" style="margin-left:5px">
                    <label>Siglas Jurisdiccion:</label>
                    <input type="text" class="input-block-level" ng-disabled="true" placeholder="Se autocompleta" ng-model="jurisdiccionPorId(obra.jurisdiccion).sigla"/>
                </div>
                <div class="span2" style="margin-left:5px">
                    <label>Nombre Corto de Jurisdicción:</label>
                    <input type="text" ng-disabled="!editando" placeholder="Nombre corto de Jurisdicción" ng-model="jurisdiccionPorId(obra.jurisdiccion).nombreCortoOrganigrama"/>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span4">
                    <label>Dependencia:</label>
                    <select class="input-block-level" style="width:100%" ng-disabled="!editando" placeholder="Segmento" ui-select2 type="text" ng-model="obra.dependencia">
                        <option value=""></option>
                        <option value=""></option>
                        <option ng-repeat="e in organigrama | orderBy: 'nombreCompleto'" value="{{e._id}}">{{e.nombreCompleto}}</option>
                    </select>
                </div>
                <div class="span2" style="margin-left:5px" ng-if="!editando">
                    <label>Referente Ejecución:</label>
                    <input type="text" placeholder="Referente Ejecución" disabled value="{{contactoPorId(obra.referente).apellidos}} {{contactoPorId(obra.referente).nombre}}" />
                </div>
                <div class="span2" style="margin-left:5px" ng-if="editando">
                    <label>Referente Ejecución:</label>
                    <select ui-select2 style="width:100%" type="text" ng-model="obra.referente" ng-options="i._id as i.apellidos + ' ' + i.nombre for i in contactos track by i._id | orderBy:'apellidos'">
                        <option ng-disabled="true" value="">{{contactoPorId(obra.referente).apellidos}} {{contactoPorId(obra.referente).nombre}}</option>
                    </select>
                </div>
                <button class="btn" style="margin-top:20px;margin-left:5px" data-placement="bottom" ng-if="editando" ng-click="crearContacto()"><i class="icon-book"></i></button>
            </div>
            <hr style="margin-top:5px; margin-bottom:5px"/>
            <div class="row-fluid">
                <div class="span2">
                    <label>Plazo Completo:</label>
                    <input type="text" ng-disabled="!editando" placeholder="Ej: Meses" ng-model="obra.plazo_completo" />
                </div>
            </div>
            
            <h4>Objetivo</h4>
            <div class="row-fluid">
                <div class="span2">
                    <input class="input-block-level" ng-disabled="!editando" date placeholder="Seleccionar fecha" type="text" ng-model="dataObjetivo.fecha"/>
                </div>
                <div class="span4" style="margin-left:5px">
                    <textarea class="input-block-level" ng-disabled="!editando" style="height:28px;width:100%" type="text" ng-model="dataObjetivo.comentario" placeholder="Sin comentarios" />
                </div>
                <div class="span2" style="margin-left:5px">
                    <button ng-disabled="!dataObjetivo.comentario.length" class="btn" ng-click="agregarHito(dataObjetivo,obra.objetivo)"><i class="icon-plus"></i></button>
                    <button ng-disabled="!editando" ng-class="{'btn-info active': dataObjetivo.cuenta}" ng-click="dataObjetivo.cuenta = !dataObjetivo.cuenta" type="button" class="btn">Cuenta</button>
                </div>
            </div>
            <div ng-hide="obra.objetivo.length">No se ha cargado ningun objetivo aún</div>
            <div ng-repeat="o in obra.objetivo" style="margin-bottom: 0px">
                <div style="margin-bottom: 8px">
                    <b>Fecha del objetivo:</b> {{o.fecha | date}}
                    <button ng-disabled="!editando" ng-class="{'btn-info active': o.cuenta}" ng-click="o.cuenta = !o.cuenta" type="button" class="btn">Cuenta</button>
                    <button ng-if="obra.objetivo[obra.objetivo.length-1].fecha === o.fecha" ng-disabled="!editando" ng-class="{'btn-info active': o.cumplido}" ng-click="o.cumplido = !o.cumplido" type="button" class="btn">Cumplido</button>
                    <br>
                    <b>Comentarios:</b> {{o.comentario}}
                </div>
            </div>
            <hr style="margin-top:5px;margin-bottom:5px"/>
            
            <h4>Presupuesto Gestión</h4>
            <div ng-show="editando" class="row-fluid">
                <div class="span2">
                    <label>Monto:</label>
                    <input type="text" class="input-block-level" ng-disabled="!editando" ng-model="$parent.dataNombrar.monto"/>
                </div>
                <div class="span2" style="margin-left:5px">
                    <label>Fecha Valor:</label>
                    <input type="text" class="input-block-level" date ng-disabled="!editando" ng-model="$parent.dataNombrar.fecha_valor"/>
                </div>
                <div class="span1" style="margin-left:5px">
                    <label>Año:</label>
                    <input type="text" class="input-block-level" ng-disabled="!editando" ng-model="$parent.dataNombrar.partida_anio"/>
                </div>
                <div class="span2" style="margin-left:5px">
                    <button ng-disabled="!editando" style="margin-top:20px" class="btn" ng-click="agregarHito(dataNombrar,obra.nombrar)"><i class="icon-plus"></i></button>
                </div>
            </div>
            
            <div ng-show="!obra.nombrar.length && !editando">No se han cargado datos aún</div>
            <div ng-repeat="o in obra.nombrar" style="margin-bottom: 0px">
                <div class="row-fluid">
                    <div class="span2">
                        <label>Monto:</label>
                        <input class="input-block-level" type="text" disabled ng-model="o.monto"/>
                    </div>
                    <div class="span2" style="margin-left:5px">
                        <label>Fecha Valor:</label>
                        <input class="input-block-level" type="text" date disabled ng-model="o.fecha_valor"/>
                    </div>
                    <div class="span1" style="margin-left:5px">
                    <label>Año:</label>
                        <input class="input-block-level" type="text" disabled ng-model="o.partida_anio"/>
                    </div>
                    <button type="button" ng-click="eliminarElemento(obra.nombrar,o)" class="btn btn-danger" ng-show="editando" style="margin-left:5px;margin-top:20px"><i class="icon-trash"></i></button>
                </div>
            </div>
            <hr style="margin-top:5px;margin-bottom:5px"/>
            
            <h4>Presupuesto SIGAF</h4>
            <div ng-show="!obra.presupuestoSigaf.length">No se han cargado presupuestos aún</div>
            <div class="row-fluid" ng-show="editando">
                <div class="span1">
                    <label>Ejercicio:</label>
                    <input type="text" class="input-block-level" ng-disabled="!editando" ng-model="$parent.presupuestoSigaf.ejercicio"/>
                </div>
                <div class="span1" style="margin-left:5px">
                    <label>Jurisdic:</label>
                    <input class="input-block-level" type="text" ng-disabled="!editando" ng-model="$parent.presupuestoSigaf.partida_jur"/>
                </div>
                <div class="span1" style="margin-left:5px">
                    <label>Entidad:</label>
                    <input class="input-block-level" type="text" ng-disabled="!editando" ng-model="$parent.presupuestoSigaf.partida_ent"/>
                </div>
                <div class="span1" style="margin-left:5px">
                    <label>Programa:</label>
                    <input class="input-block-level" type="text" ng-disabled="!editando" ng-model="$parent.presupuestoSigaf.partida_pr"/>
                </div>
                <div class="span1" style="margin-left:5px">
                    <label>Proyecto:</label>
                    <input class="input-block-level" type="text" ng-disabled="!editando" ng-model="$parent.presupuestoSigaf.partida_proy"/>
                </div>
                <div class="span1" style="margin-left:5px">
                    <label>Actividad:</label>
                    <input class="input-block-level" type="text" ng-disabled="!editando" ng-model="$parent.presupuestoSigaf.partida_act"/>
                </div>
                <div class="span1" style="margin-left:5px">
                    <label>Obra:</label>
                    <input class="input-block-level" type="text" ng-disabled="!editando" ng-model="$parent.presupuestoSigaf.partida_obra"/>
                </div>
                <div class="span1" style="margin-left:5px">
                    <label>FuentFin:</label>
                    <input class="input-block-level" type="text" ng-disabled="!editando" ng-model="$parent.presupuestoSigaf.partida_ff"/>
                </div>
                <div class="span1" style="margin-left:5px">
                    <label>Moneda:</label>
                    <input class="input-block-level" type="text" ng-disabled="!editando" ng-model="$parent.presupuestoSigaf.partida_mon"/>
                </div>
                <div class="span1" style="margin-left:5px">
                    <label>Inciso:</label>
                    <input class="input-block-level" type="text" ng-disabled="!editando" ng-model="$parent.presupuestoSigaf.partida_inc"/>
                </div>
                <div class="span1" style="margin-left:5px">
                    <label>Principal:</label>
                    <input class="input-block-level" type="text" ng-disabled="!editando" ng-model="$parent.presupuestoSigaf.partida_pri"/>
                </div>
                <div class="span1" style="margin-left:5px">
                    <label>Parcial:</label>
                    <input class="input-block-level" type="text" ng-disabled="!editando" ng-model="$parent.presupuestoSigaf.partida_par"/>
                </div>
                <div class="span1" style="margin-left:5px">
                    <label>Ubic Geo:</label>
                    <input class="input-block-level" type="text" ng-disabled="!editando" ng-model="$parent.presupuestoSigaf.partida_ubg"/>
                </div>
                <div class="span1" style="margin-left:5px;margin-top:20px">
                    <button ng-disabled="!editando" class="btn" ng-click="agregarHito(presupuestoSigaf,obra.presupuestoSigaf)"><i class="icon-plus"></i></button>
                </div>
            </div>
            
            <div ng-repeat="o in obra.presupuestoSigaf" ng-controller="PresupuestoSigafCtrl">
                <div class="row-fluid">
                    <div class="span1">
                        <label>Ejercicio:</label>
                        <input type="text" class="input-block-level" disabled ng-model="o.ejercicio"/>
                    </div>
                    <div class="span1" style="margin-left:5px">
                        <label>Jurisdic:</label>
                        <input type="text" class="input-block-level" disabled ng-model="o.partida_jur"/>
                    </div>
                    <div class="span1" style="margin-left:5px">
                        <label>Entidad:</label>
                        <input type="text" class="input-block-level" disabled ng-model="o.partida_ent"/>
                    </div>
                    <div class="span1" style="margin-left:5px">
                        <label>Programa:</label>
                        <input type="text" class="input-block-level" disabled ng-model="o.partida_pr"/>
                    </div>
                    <div class="span1" style="margin-left:5px">
                        <label>Proyecto:</label>
                        <input type="text" class="input-block-level" disabled ng-model="o.partida_proy"/>
                    </div>
                    <div class="span1" style="margin-left:5px">
                        <label>Actividad:</label>
                        <input type="text" class="input-block-level" disabled ng-model="o.partida_act"/>
                    </div>
                    <div class="span1" style="margin-left:5px">
                        <label>Obra:</label>
                        <input type="text" class="input-block-level" disabled ng-model="o.partida_obra"/>
                    </div>
                    <div class="span1" style="margin-left:5px">
                        <label>FuentFin:</label>
                        <input type="text" class="input-block-level" disabled ng-model="o.partida_ff"/>
                    </div>
                    <div class="span1" style="margin-left:5px">
                        <label>Moneda:</label>
                        <input type="text" class="input-block-level" disabled ng-model="o.partida_mon"/>
                    </div>
                    <div class="span1" style="margin-left:5px">
                        <label>Inciso:</label>
                        <input type="text" class="input-block-level" disabled ng-model="o.partida_inc"/>
                    </div>
                    <div class="span1" style="margin-left:5px">
                        <label>Principal:</label>
                        <input type="text" class="input-block-level" disabled ng-model="o.partida_pri"/>
                    </div>
                    <div class="span1" style="margin-left:5px">
                        <label>Parcial:</label>
                        <input type="text" class="input-block-level" disabled ng-model="o.partida_par"/>
                    </div>
                    <div class="span1" style="margin-left:5px">
                        <label>Ubic Geo:</label>
                        <input type="text" class="input-block-level" disabled ng-model="o.partida_ubg"/>
                    </div>
                </div>
                <div class="row-fluid">
                    <div class="span2">
                        <label>Definitivo:</label>
                        <input type="text" class="input-block-level" disabled ng-model="sigaf.definitivo"/>
                    </div>
                    <div class="span2" style="margin-left:5px">
                        <label>Devengado:</label>
                        <input type="text" class="input-block-level" disabled ng-model="sigaf.devengado"/>
                    </div>
                    <div class="span2" style="margin-left:5px">
                        <label>Pagado:</label>
                        <input type="text" class="input-block-level" disabled ng-model="sigaf.pagado"/>
                    </div>
                    <div class="span2" style="margin-left:5px">
                        <label>Preventivo:</label>
                        <input type="text" class="input-block-level" disabled ng-model="sigaf.preventivo"/>
                    </div>
                    <div class="span2" style="margin-left:5px">
                        <label>Restringido:</label>
                        <input type="text" class="input-block-level" disabled ng-model="sigaf.restringido"/>
                    </div>
                    <div class="span2" style="margin-left:5px">
                        <label>Vigente:</label>
                        <input type="text" class="input-block-level" disabled ng-model="sigaf.vigente"/>
                    </div>
                </div>
                <hr style="margin-top:10px;margin-bottom:10px">
            </div>
            <hr style="margin-top:10px;margin-bottom:10px">
            <div class="row-fluid">
                <div class="span2">
                    <label>Prioridad:</label>
                    <select class="input-block-level" style="width:100%" ng-disabled="!editando" placeholder="Prioridad" ui-select2 type="text" ng-model="obra.relevancia">
                        <option value=""></option>
                        <option value=""></option>
                        <option ng-repeat="e in relevancias | orderBy: 'nombre'" value="{{e._id}}">{{e.nombre}}</option>
                    </select>
                </div>
                <div class="span2" style="margin-left:5px">
                    <label>Criticidad:</label>
                    <select class="input-block-level" style="width:100%" ng-disabled="!editando" placeholder="Criticidad" ui-select2 type="text" ng-model="obra.criticidad">
                        <option value=""></option>
                        <option value=""></option>
                        <option ng-repeat="e in criticidades | orderBy: 'nombre'" value="{{e._id}}">{{e.nombre}}</option>
                    </select>
                </div>
                <div class="span2" style="margin-left:5px">
                    <label>Alcance:</label>
                    <select class="input-block-level" style="width:100%" ng-disabled="!editando" placeholder="Alcance" ui-select2 type="text" ng-model="obra.alcance">
                        <option value=""></option>
                        <option value=""></option>
                        <option ng-repeat="e in alcances | orderBy: 'nombre'" value="{{e._id}}">{{e.nombre}}</option>
                    </select>
                </div>
                <div class="span2" style="margin-left:5px">
                    <label>Segmento Etario:</label>
                    <select class="input-block-level" style="width:100%" ng-disabled="!editando" placeholder="Segmento Etario" ui-select2 type="text" ng-model="obra.segmento_etario">
                        <option value=""></option>
                        <option value=""></option>
                        <option ng-repeat="e in segmentos | orderBy: 'nombre'" value="{{e._id}}">{{e.nombre}}</option>
                    </select>
                </div>
                <div class="span2" style="margin-left:5px">
                    <label>Ciudadanos Afectados:</label>
                    <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Ciudadanos Afectados" ng-model="obra.ciudadanos" />
                </div>
                <div class="span2" style="margin-left:5px">
                    <label>Metros Cuadrados:</label>
                    <input type="text" class="input-block-level" ng-disabled="!editando" placeholder="Metros Cuadrados" ng-model="obra.metros" />
                </div>
            </div>
            <hr style="margin-top:5px; margin-bottom:5px"/>
            
            <div class="row-fluid">
                <div class="span12">
                    <h4>Descripciones
                        <div class="card-actions pull-right">
                            <a class="btn btn-link" ng-click="agregarDescrAlcance()" ng-if="editando"><i class="icon-plus"></i></a>
                        </div>
                    </h4>
                </div>
            </div>
            <div class="container-fluid">
                <div ng-hide="obra.descripcionesAlcance.length">No se ha cargado ninguna descripción aún</div>
                <div ng-repeat="o in reverse(obra.descripcionesAlcance)" style="min-height:40px;margin-bottom:20px">
                    <div class="row-fluid">
                        <div class="span1 pull-right">
                            <button type="button" ng-click="eliminarElemento(obra.descripcionesAlcance,o)" style="margin-top:20px" class="btn btn-danger pull-right" ng-if="editando"><i class="icon-trash icon-white"></i></button>
                        </div>
                        <div class="span2" style="margin-left:0px">
                            <label>Quien:</label>
                            <input type="text" class="input-block-level" value="{{contactoPorId(o.quien).apellidos}} {{contactoPorId(o.quien).nombre}}" ng-disabled="true"/>
                        </div>
                        <div class="span2" style="margin-left:5px">
                            <label>Cuando:</label>
                            <input type="text" class="input-block-level" date ng-model="o.cuando" ng-disabled="true"/>
                        </div>
                        <div class="span12" style="margin-left:0px">
                            <textarea class="input-block-level" style="height:75px" type="text" ng-disabled="true" ng-model="o.descripcion"/>
                        </div>
                    </div>
                    <hr style="margin-top:5px;margin-bottom:5px"/>
                </div>
                <funcion-hitos tipo=imgDoc donde=obra.fotosAlcance botonImg=agregarImagenes('',obra.fotosAlcance,false,'alcance') botonDoc=agregarDocumentos('alcance') docDonde=obra.documentosAlcance></funcion-hitos>
            </div>
        </div>
        
        <div ng-if="tab == 'proyecto'" class="container-fluid">
            <!--Si existe hito, agregar uno nuevo-->
            <funcion-hitos ng-show="obra.proyectos[obra.proyectos.length-1].nuevaFecha && editando" tipo=nuevaFecha donde=dataProyectos valor=agregarHito(dataProyectos,obra.proyectos)></funcion-hitos>
            <!--Si no existe ningun hito aun, agregar uno nuevo-->
            <div ng-show="obra.proyectos.length < 1 && !editando">No se ha cargado ningun proyecto aún.</div>
            <funcion-hitos ng-show="obra.proyectos.length < 1" tipo=nuevaFecha donde=dataProyectos valor=agregarHito(dataProyectos,obra.proyectos)></funcion-hitos>
            <!--Listado de hitos-->
            <funcion-hitos ng-init="mostrar = -3" ng-show="obra.proyectos.length" tipo=listado donde=proyectos valor=agregarHito(dataProyectos,obra.proyectos)></funcion-hitos>
            <!--Si la ultima fecha esta cancelada-->
            <funcion-hitos ng-show="obra.proyectos[obra.proyectos.length-1].cancelado" tipo=cancelado donde=proyectos></funcion-hitos>
            <!--Si la ultima fecha esta cumplida-->
            <funcion-hitos ng-show="obra.proyectos[obra.proyectos.length-1].cumplido" tipo=cumplido donde=proyectos></funcion-hitos>
            <!--Imagenes y documentos-->
            <!--<funcion-hitos tipo=imgDoc donde=obra.imagenesProy imgDonde='proyecto' botonDoc=agregarDocumentos('proyecto') docDonde=obra.documentosProy></funcion-hitos>-->
            <funcion-hitos tipo=imgDoc donde=obra.imagenesProy botonImg=agregarImagenes('',obra.imagenesProy,false,'proyecto') botonDoc=agregarDocumentos('proyecto') docDonde=obra.documentosProy></funcion-hitos>
        </div>
        
        <div ng-if="tab == 'contrato'" class="container-fluid">
            <!--Si existe hito, agregar uno nuevo-->
            <funcion-hitos ng-show="obra.contratos[obra.contratos.length-1].nuevaFecha && editando" tipo=nuevaFecha donde=dataContratos valor=agregarHito(dataContratos,obra.contratos)></funcion-hitos>
            <!--Si no existe ningun hito aun, agregar uno nuevo-->
            <div ng-show="obra.contratos.length < 1 && !editando">No se ha cargado ningun contrato aún.</div>
            <funcion-hitos ng-show="obra.contratos.length < 1" tipo=nuevaFecha donde=dataContratos valor=agregarHito(dataContratos,obra.contratos)></funcion-hitos>
            <!--Listado de hitos-->
            <funcion-hitos ng-init="mostrar = -3" ng-show="obra.contratos.length" tipo=listado donde=contratos valor=agregarHito(dataContratos,obra.contratos)></funcion-hitos>
            <!--Si la ultima fecha esta cancelada-->
            <funcion-hitos ng-show="obra.contratos[obra.contratos.length-1].cancelado" tipo=cancelado donde=contratos></funcion-hitos>
            <!--Si la ultima fecha esta cumplida-->
            <funcion-hitos ng-show="obra.contratos[obra.contratos.length-1].cumplido" tipo=cumplido donde=contratos></funcion-hitos>
            <!--Imagenes y documentos-->
            <!--<funcion-hitos tipo=imgDoc donde=obra.imagenesCont imgDonde='contrato' botonDoc=agregarDocumentos('contrato') docDonde=obra.documentosCont></funcion-hitos>-->
            <funcion-hitos tipo=imgDoc donde=obra.imagenesCont botonImg=agregarImagenes('',obra.imagenesCont,false,'contrato') botonDoc=agregarDocumentos('contrato') docDonde=obra.documentosCont></funcion-hitos>
        </div>
        
        <div ng-if="tab == 'inicio'" class="container-fluid">
            <!--Si existe hito, agregar uno nuevo-->
            <funcion-hitos ng-show="obra.inicios[obra.inicios.length-1].nuevaFecha && editando" tipo=nuevaFecha donde=dataInicios valor=agregarHito(dataInicios,obra.inicios)></funcion-hitos>
            <!--Si no existe ningun hito aun, agregar uno nuevo-->
            <div ng-show="obra.inicios.length < 1 && !editando">No se ha cargado ningun inicio aún.</div>
            <funcion-hitos ng-show="obra.inicios.length < 1" tipo=nuevaFecha donde=dataInicios valor=agregarHito(dataInicios,obra.inicios)></funcion-hitos>
            <!--Listado de hitos-->
            <funcion-hitos ng-init="mostrar = -3" ng-show="obra.inicios.length" tipo=listado donde=inicios valor=agregarHito(dataInicios,obra.inicios)></funcion-hitos>
            <!--Si la ultima fecha esta cancelada-->
            <funcion-hitos ng-show="obra.inicios[obra.inicios.length-1].cancelado" tipo=cancelado donde=inicios></funcion-hitos>
            <!--Si la ultima fecha esta cumplida-->
            <funcion-hitos ng-show="obra.inicios[obra.inicios.length-1].cumplido" tipo=cumplido donde=inicios></funcion-hitos>
            <!--Cargar nuevo relevamiento-->
            <funcion-hitos ng-show="mostrarNuevoRel && editando" tipo=nuevoRelevamiento donde=iniciosRel dataRel=dataIniciosRel valor=agregarHito(dataIniciosRel,obra.iniciosRel) ></funcion-hitos>
            <!--Listado de relevamientos-->
            <funcion-hitos ng-init="mostrarRel = -3" tipo=listadoRelevamientos donde=iniciosRel valor=agregarHito(dataIniciosRel,obra.iniciosRel) ></funcion-hitos>
            <!--Imagenes y documentos-->
            <!--<funcion-hitos tipo=imgDoc donde=obra.imagenesIniRel imgDonde='inicios' botonDoc=agregarDocumentos('inicio') docDonde=obra.documentosIniRel></funcion-hitos>-->
            <funcion-hitos tipo=imgDoc donde=obra.imagenesIniRel botonImg=agregarImagenes('',obra.imagenesIniRel,false,'inicios') botonDoc=agregarDocumentos('inicio') docDonde=obra.documentosIniRel></funcion-hitos>
        </div>
        
        <div ng-if="tab == 'avance'" class="container-fluid">
            <legend ng-show="obra.fisico.length > 0">Relevamientos
                <a class="btn btn-link pull-right" ng-show="obra.fisico.length > 3" ng-click="mostrarRel = (mostrarRel == -3 ? 100 : -3)"><i class="icon-align-justify"></i></a>
                <a class="btn btn-link pull-right" ng-show="checkRelevamiento('avance')" ng-click="buscarRelevamientos('avance')"><i class="icon-eye-open"></i></a>
            </legend>
            <div ng-if="!obra.fisico.length">No se ha cargado ningun relevamiento aún</div>
            
            <!--Si no existe ningun avance fisico aun, agregar uno nuevo-->
            <div ng-show="obra.fisico.length < 1">
                <form class="form-inline" ng-show="editando">
                    <label class="card-actions pull-right" style="margin: 0; padding: 0">
                        <button class="btn btn-link" data-placement="bottom" style="margin-bottom: 10px" ng-click="agregarHito(dataFisicos,obra.fisico)"><i class="icon-plus"></i></button>
                    </label>
                    <label>Fecha de relevamiento:<br>
                        <input date type="text" placeholder="Fecha de confirmacion" ng-model="dataFisicos.fechaOkIniRel"/>
                    </label>
                    <label>Relevamiento:<br>
                        <select ui-select2 type="text" ng-model="dataFisicos.relevamiento">
                            <option value=""></option>
                            <option value="Nunca se va a relevar">Nunca se va a relevar</option>
                            <option value="Relevado concuerda">Relevado concuerda</option>
                            <option value="Relevado no concuerda">Relevado no concuerda</option>
                            <option value="No relevado">No relevado</option>
                        </select>
                    </label>
                    <label>Porcentaje de avance:<br>
                        <input type="text" placeholder="Porcentaje de avance" ng-model="dataFisicos.avance"/>
                    </label>
                    <br>
                    <div>Comentarios:<br>
                        <textarea rows="3" style="width:95%" type="text" ng-model="dataFisicos.observacionesRelevamiento"/>
                    </div>
                </form>
            </div>
            
            <!--Mostrar para cargar un nuevo relevamiento-->
            <div ng-show="obra.fisico[obra.fisico.length-1].nuevoRelevamiento">
                <form class="form-inline">
                    <label class="card-actions pull-right" style="margin: 0; padding: 0">
                        <button ng-show="editando" class="btn btn-link" data-placement="bottom" style="margin-bottom: 10px" ng-click="agregarHito(dataFisicos,obra.fisico)"><i class="icon-plus"></i></button>
                    </label>
                    <label>Fecha de relevamiento:<br>
                        <input ng-disabled="!editando" date type="text" placeholder="Fecha de confirmacion" ng-model="dataFisicos.fechaOkIniRel"/>
                    </label>
                    <label>Relevamiento<br>
                        <select ng-disabled="!editando" ui-select2 type="text" ng-model="dataFisicos.relevamiento">
                            <option value=""></option>
                            <option value="Nunca se va a relevar">Nunca se va a relevar</option>
                            <option value="Relevado concuerda">Relevado concuerda</option>
                            <option value="Relevado no concuerda">Relevado no concuerda</option>
                            <option value="No relevado">No relevado</option>
                        </select>
                    </label>
                    <label>Porcentaje de avance:<br>
                        <input ng-disabled="!editando" type="text" placeholder="Porcentaje de avance" ng-model="dataFisicos.avance"/>
                    </label>
                    <br>
                    <div>Comentarios:<br>
                        <textarea ng-disabled="!editando" rows="3" style="width:95%" type="text" ng-model="dataFisicos.observacionesRelevamiento"/>
                    </div>
                </form>
            </div>
            
            <form ng-init="mostrarRel = -3" class="form-inline">
                <div ng-repeat="o in obra.fisico | limitTo: mostrarRel">
                    <label> Fecha de relevamiento:<br/>
                        <input disabled date type="text" placeholder="Fecha de confirmacion" ng-model="o.fechaOkIniRel"/>
                    </label>
                    <label>Relevamiento:<br>
                        <select disabled ui-select2 type="text" ng-model="o.relevamiento">
                            <option value=""></option>
                            <option value="Nunca se va a relevar">Nunca se va a relevar</option>
                            <option value="Relevado concuerda">Relevado concuerda</option>
                            <option value="Relevado no concuerda">Relevado no concuerda</option>
                            <option value="No relevado">No relevado</option>
                        </select>
                    </label>
                    <label>Porcentaje de avance:<br>
                        <input type="text" disabled placeholder="Porcentaje de avance" ng-model="o.avance"/>
                    </label>
                    <button ng-disabled="!editando" ng-if="obra.fisico[obra.fisico.length-1].fechaOkIniRel === o.fechaOkIniRel && obra.fisico[obra.fisico.length-1]" ng-class="{'btn-info active': o.nuevoRelevamiento}" ng-click="o.nuevoRelevamiento = !o.nuevoRelevamiento" type="button" class="btn">Nuevo relevamiento</button>
                    <label class="checkbox" style="display:inline-block;padding-left:0px;height:15px;margin-bottom:-7px;">
                        Obra con posible atraso <input type="checkbox" ng-disabled="!editando" ng-model="o.posibleAtraso" style="margin-left:20px;margin-right:5px">
                    </label>
                    <br>
                    <div>Comentarios:<br>
                        <textarea disabled rows="3" style="width:95%" type="text" ng-model="o.observacionesRelevamiento"/>
                    </div>
                    <hr>
                </div>
                <!--Imagenes
                
                y documentos-->
                <!--<funcion-hitos tipo=imgDoc donde=obra.imagenesFisico imgDonde='fisico' botonDoc=agregarDocumentos('avanceFisico') docDonde=obra.documentosFisico></funcion-hitos>-->
                <funcion-hitos tipo=imgDoc donde=obra.imagenesFisico botonImg=agregarImagenes('',obra.imagenesFisico,false,'fisico') botonDoc=agregarDocumentos('avanceFisico') docDonde=obra.documentosFisico></funcion-hitos>
            </form>
        </div>
        
        <div ng-if="tab == 'final'" class="container-fluid">
            <!--Si existe hito, agregar uno nuevo-->
            <funcion-hitos ng-show="obra.final[obra.final.length-1].nuevaFecha && editando" tipo=nuevaFecha donde=dataFinal valor=agregarHito(dataFinal,obra.final)></funcion-hitos>
            <!--Si no existe ningun hito aun, agregar uno nuevo-->
            <div ng-show="obra.final.length < 1 && !editando">No se ha cargado ningun final aún.</div>
            <funcion-hitos ng-show="obra.final.length < 1" tipo=nuevaFecha donde=dataFinal valor=agregarHito(dataFinal,obra.final)></funcion-hitos>
            <!--Listado de hitos-->
            <funcion-hitos ng-init="mostrar = -3" ng-show="obra.final.length" tipo=listado donde=final valor=agregarHito(dataFinal,obra.final)></funcion-hitos>
            <!--Si la ultima fecha esta cancelada-->
            <funcion-hitos ng-show="obra.final[obra.final.length-1].cancelado" tipo=cancelado donde=final></funcion-hitos>
            <!--Si la ultima fecha esta cumplida-->
            <funcion-hitos ng-show="obra.final[obra.final.length-1].cumplido" tipo=cumplido donde=final></funcion-hitos>
            <!--Cargar nuevo relevamiento-->
            <funcion-hitos ng-show="mostrarNuevoRel && editando" tipo=nuevoRelevamiento donde=finalRel dataRel=dataFinRel valor=agregarHito(dataFinRel,obra.finalRel)></funcion-hitos>
            <!--Listado de relevamientos-->
            <funcion-hitos ng-init="mostrarRel = -3" tipo=listadoRelevamientos donde=finalRel valor=agregarHito(dataFinRel,obra.finalRel) ></funcion-hitos>
            <!--Imagenes y documentos-->
            <!--<funcion-hitos tipo=imgDoc donde=obra.imagenesFinRel imgDonde='final' botonDoc=agregarDocumentos('final') docDonde=obra.documentosFinRel></funcion-hitos>-->
            <funcion-hitos tipo=imgDoc donde=obra.imagenesFinRel botonImg=agregarImagenes('',obra.imagenesFinRel,false,'final') botonDoc=agregarDocumentos('final') docDonde=obra.documentosFinRel></funcion-hitos>
        </div>
        
        <div ng-show="tab == 'comunicacion'" class="container-fluid">
            <div class="row-fluid">
                <div class="span2 btn-group" style="width:130px" data-toggle="buttons-radio">
                    <label>Inaugurable:</label>
                    <button ng-disabled="!editando" class="btn" ng-class="(obra.inaugurable == 'si') && 'active btn-info'" ng-click="obra.inaugurable = (obra.inaugurable == 'si' ? '' : 'si')" style="padding-left: 26px; padding-right: 26px;">Si</button>
                    <button ng-disabled="!editando" class="btn" ng-class="(obra.inaugurable == 'no') && 'active btn-info'" ng-click="obra.inaugurable = (obra.inaugurable == 'no' ? '' : 'no')" style="padding-left: 26px; padding-right: 26px;">No</button>
                </div>
                <div class="span2 btn-group" style="width:130px" data-toggle="buttons-radio" style="margin-left:5px">
                    <label>Visitable:</label>
                    <button ng-disabled="!editando" class="btn" ng-class="(obra.visitable == 'si') && 'active btn-info'" ng-click="obra.visitable = (obra.visitable == 'si' ? '' : 'si')" style="padding-left: 26px; padding-right: 26px;">Si</button>
                    <button ng-disabled="!editando" class="btn" ng-class="(obra.visitable == 'no') && 'active btn-info'" ng-click="obra.visitable = (obra.visitable == 'no' ? '' : 'no')" style="padding-left: 26px; padding-right: 26px;">No</button>
                </div>
                <div class="span2 btn-group" style="width:130px" data-toggle="buttons-radio" style="margin-left:5px">
                    <label>Comunicable:</label>
                    <button ng-disabled="!editando" class="btn" ng-class="(obra.comunicable == 'si') && 'active btn-info'" ng-click="obra.comunicable = (obra.comunicable == 'si' ? '' : 'si')" style="padding-left: 26px; padding-right: 26px;">Si</button>
                    <button ng-disabled="!editando" class="btn" ng-class="(obra.comunicable == 'no') && 'active btn-info'" ng-click="obra.comunicable = (obra.comunicable == 'no' ? '' : 'no')" style="padding-left: 26px; padding-right: 26px;">No</button>
                </div>
                <div class="span2 btn-group" style="width:130px" data-toggle="buttons-radio" style="margin-left:5px">
                    <label>Participable:</label>
                    <button ng-disabled="!editando" class="btn" ng-class="(obra.participable == 'si') && 'active btn-info'" ng-click="obra.participable = (obra.participable == 'si' ? '' : 'si')" style="padding-left: 26px; padding-right: 26px;">Si</button>
                    <button ng-disabled="!editando" class="btn" ng-class="(obra.participable == 'no') && 'active btn-info'" ng-click="obra.participable = (obra.participable == 'no' ? '' : 'no')" style="padding-left: 26px; padding-right: 26px;">No</button>
                </div>
                <div class="span2">
                    <label>Inicio Estimado:</label>
                    <input type="text" class="input-block-level" date ng-disabled="!editando" placeholder="Fecha" ng-model="obra.fec_inicio"/>
                </div>
                <div class="span2">
                    <label>Fin Estimado:</label>
                    <input type="text" class="input-block-level" date ng-disabled="!editando" placeholder="Fecha" ng-model="obra.fec_fin"/>
                </div>
                <div class="span2">
                    <label>Inauguración Estimada:</label>
                    <input type="text" class="input-block-level" date ng-disabled="!editando" placeholder="Fecha" ng-model="obra.fec_inauguracion"/>
                </div>
            </div>
            <hr style="margin-top:5px; margin-bottom:5px"/>
            
            <div class="row-fluid">
                <div class="span12" style="margin-left:0px">
                    <div class="span7" style="margin-left:0px">
                        <h4>Detalles de comunicación
                            <div class="card-actions pull-right" style="margin: 0; padding: 0">
                                <a class="btn btn-link" ng-click="agregarDetaComunicacion()" ng-if="editando" style="margin-right: 35px"><i class="icon-plus"></i></a>
                            </div>
                        </h4>
                        <div ng-hide="obra.detallesComunicacion.length">No se ha cargado ningun detalle aún</div>
                        
                        <div class="row-fluid">
                            <div ng-repeat="o in reverse(obra.detallesComunicacion)" style="clear:both; min-height: 40px; margin-top: 10px; margin-bottom: 20px">
                                <div class="pull-right" style="display: inline-block; margin-right: 10px; margin-bottom: 10px">
                                    <button type="button" ng-click="eliminarElemento(obra.detallesComunicacion,o)" style="margin-left: 10px; margin-right: 5px; margin-top: 20px;" class="btn btn-danger" ng-if="editando"><i class="icon-trash icon-white"></i> Eliminar</button>
                                </div>
                                <div class="span4" style="margin-left:0px">
                                    <label>Quien:</label>
                                    <input type="text" class="input-block-level" value="{{contactoPorId(o.quien).apellidos}} {{contactoPorId(o.quien).nombre}}" ng-readonly="true"/>
                                </div>
                                <div class="span2" style="margin-left:5px">
                                    <label>Cuando:</label>
                                    <input type="text" class="input-block-level" date ng-model="o.cuando" ng-readonly="true"/>
                                </div>
                                <textarea style="height:150px;width:95%" type="text" ng-readonly="true" ng-model="o.detalle"/>
                                <hr style="margin-top:5px;margin-bottom:0px"/>
                            </div>
                        </div>
                    </div>
                    
                    <div class="span5">
                        <h4>Detalles de ubicación
                            <div class="card-actions pull-right" style="margin: 0; padding: 0">
                                <a class="btn btn-link" ng-click="agregarUbiComunicacion()" ng-if="editando" style="margin-right: 25px;"><i class="icon-plus"></i></a>
                            </div>
                        </h4>
                        <div ng-hide="obra.ubicacionesComunicacion.length">No se ha cargado ninguna ubicación aún</div>
                        
                        <div class="row-fluid">
                            <div ng-repeat="u in obra.ubicacionesComunicacion" style="clear:both; min-height: 40px; margin-top: 10px; margin-bottom: 20px">
                                <div class="pull-right" style="display: inline-block; margin-right: 0px; margin-bottom: 10px">
                                    <button type="button" ng-click="eliminarElemento(obra.ubicacionesComunicacion,u)" style="margin-left: 10px; margin-right: 5px; margin-top: 20px;" class="btn btn-danger" ng-if="editando"><i class="icon-trash icon-white"></i> Eliminar</button>
                                </div>
                                <div class="span5" style="margin-left:0px">
                                    <label>Quien:</label>
                                    <input type="text" class="input-block-level" value="{{contactoPorId(u.quien).apellidos}} {{contactoPorId(u.quien).nombre}}" ng-readonly="true"/>
                                </div>
                                <div class="span3" style="margin-left:5px">
                                    <label>Cuando:</label>
                                    <input type="text" class="input-block-level" date ng-model="u.cuando" ng-readonly="true"/>
                                </div>
                                <textarea style="height:150px;width:95%" type="text" ng-readonly="true" ng-model="u.detalle" />
                                <hr style="margin-top:5px;margin-bottom:0px"/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12" style="margin-left:0px">
                    <hr style="margin-top:5px;margin-bottom:5px"/>
                    <funcion-hitos tipo=imgDoc donde=obra.fotos imgDonde='comunicacion' botonImg=agregarImagenes('',obra.fotos,false,'comunicacion') botonDoc=agregarDocumentos('comunicacion') docDonde=obra.documentos></funcion-hitos>
                </div>
            </div>
        </div>
        
        <div ng-if="tab == 'estado'" class="container-fluid">
            <div class="row-fluid">
                <div class="span12">
                    <div class="span2" style="margin-top:5px">
                        <label>Estado:</label>
                        <select class="input-block-level" ng-disabled="!editando" placeholder="Estado" ui-select2 type="text" ng-model="obra.estado">
                            <option value=""></option>
                            <option value=""></option>
                            <option ng-repeat="e in estados | orderBy: 'nombre'" value="{{e._id}}">{{e.nombre}}</option>
                        </select>
                    </div>
                </div>
            </div>
            <hr style="margin-top:10px;margin-bottom:10px"/>
            <div class="row-fluid">
                <div ng-hide="obra.comentariosEstado.length">No se ha cargado ningun comentario aún</div>
                <h4 style="margin-top:5px">Comentarios
                    <div class="card-actions pull-right" style="margin: 0; padding: 0">
                        <a class="btn btn-link" ng-click="agregarComEstado()" ng-if="editando"><i class="icon-plus"></i></a>
                    </div>
                </h4>
                <div class="span12" style="margin-left:0px">
                    <div ng-repeat="o in reverse(obra.comentariosEstado)">
                        <div class="span12 pull-left" style="margin-bottom:10px">
                            <button ng-show="o.tipoComentario == 'solicitada'" type="button" class="btn disabled btn-info">Solicitada</button>
                            <button ng-show="o.tipoComentario == 'propuesta'" type="button" class="btn disabled btn-info">Propuesta</button>
                            <button ng-show="o.tipoComentario == 'aprobada'" type="button" class="btn disabled btn-info">Aprobada (Iniciativa)</button>
                            <button type="button" ng-show="o.tipoComentario == 'pospuesta'" class="btn disabled btn-info">Sin Financiamiento</button>
                            <button type="button" ng-show="o.tipoComentario == 'rechazada'" class="btn disabled btn-info">Rechazada</button>
                            <button type="button" ng-show="o.tipoComentario == 'aprobado'" class="btn disabled btn-info">Aprobado (Obra)</button>
                            <button type="button" ng-show="o.tipoComentario == 'final'" class="btn disabled btn-info">Final</button>
                            
                            <button type="button" ng-click="eliminarElemento(obra.comentariosEstado,o)" class="btn btn-danger pull-right" ng-if="editando"><i class="icon-trash icon-white"></i>Eliminar</button>
                        </div>
                        <textarea type="text" rows="3" style="width:99%" ng-disabled="true" ng-model="o.comentario"/>
                        <div class="span2" style="margin-left:0px">
                            <label>Quien:</label>
                            <input type="text" class="input-block-level" value="{{contactoPorId(o.quien).apellidos}} {{contactoPorId(o.quien).nombre}}" ng-disabled="true"/>
                        </div>
                        <div class="span2" style="margin-left:5px">
                            <label>Cuando:</label>
                            <input type="text" class="input-block-level" date ng-model="o.cuando" ng-disabled="true"/>
                        </div>
                        <div class="span12" style="margin-left:0px">
                            <hr style="margin-top:5px;margin-bottom:0px"/>
                        </div>
                    </div>
                </div>
                <!--Imagenes y documentos-->
                <funcion-hitos tipo=imgDoc donde=obra.fotosEstado botonImg=agregarImagenes('',obra.fotosEstado,false,'estado') botonDoc=agregarDocumentos('estado') docDonde=obra.documentosEstado></funcion-hitos>
            </div>
        </div>
    </div>
</div>

<div id="confirmarEliminar" class="modal hide fade">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3>Eliminar obra</h3>
    </div>
    <div class="modal-body">
        <p>Está a un paso de eliminar la obra</p>
    </div>
    <div class="modal-footer">
        <a href="#" class="btn btn-info" data-dismiss="modal">Conservar el registro</a>
        <a href="#" class="btn btn-danger" data-dismiss="modal" ng-click="eliminarObra(true)">Eliminar la obra</a>
    </div>
</div>